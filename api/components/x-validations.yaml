x-validations:
  _TESTS_:
    search:
      - _NAME_: SEARCH_CONTEXT
        action: ['search']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: &CONTEXT_COMMON
          - _NAME_: CONTEXT_REQUIRED
            _RETURN_:
              - _NAME_: REQUIRED_CONTEXT_LOCATION_COUNTRY_CODE
                attr: $.context.location.country.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_LOCATION_CITY_CODE
                attr: $.context.location.city.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_DOMAIN
                attr: $.context.domain
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TIMESTAMP
                attr: $.context.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BAP_ID
                attr: $.context.bap_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BAP_URI
                attr: $.context.bap_uri
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BPP_ID
                attr: $.context.bpp_id
                var_search:
                  - search
                _CONTINUE_: (action equal to var_search)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BPP_URI
                attr: $.context.bpp_uri
                var_search:
                  - search
                _CONTINUE_: (action equal to var_search)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TRANSACTION_ID
                attr: $.context.transaction_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_MESSAGE_ID
                attr: $.context.message_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_VERSION
                attr: $.context.version
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TTL
                attr: $.context.ttl
                _RETURN_: attr are present
          - _NAME_: CONTEXT_ENUM
            _RETURN_:
              - _NAME_: VALID_CONTEXT_LOCATION_COUNTRY_CODE
                attr: $.context.location.country.code
                enumList:
                  - IND
                _RETURN_: attr any in enumList
              - _NAME_: VALID_CONTEXT_DOMAIN
                attr: $.context.domain
                enumList:
                  - ONDC:TRV14
                _RETURN_: attr all in enumList
          - _NAME_: CONTEXT_REGEX
            _RETURN_:
              - _NAME_: REGEX_CONTEXT_LOCATION_CITY_CODE
                attr: $.context.location.city.code
                reg: ['(\\*)|(^std\\:[0-9]{3,5}$)']
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_TIMESTAMP
                attr: $.context.timestamp
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_BAP_ID
                attr: $.context.bap_id
                reg: ['^(?!.*\\b(?:http|https|www)\b)[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+$']
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_BAP_URI
                attr: $.context.bap_uri
                reg: ['^https:\/\/(www\.)?[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+$']
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_CONTEXT_TTL
                attr: $.context.ttl
                reg: ['^P(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(\\d+H)?(\\d+M)?(\\d+S)?)?$']
                _RETURN_: attr follow regex reg
      - _NAME_: SEARCH_INTENT
        action: ['search']
        _RETURN_:
          - _NAME_: REQUIRED_CATEGORY_CODE
            attr: $.message.intent.category.descriptor.code
            _RETURN_: attr are present
          - _NAME_: VALID_ENUM_CATEGORY_CODE
            attr: $.message.intent.category.descriptor.code
            enumList:
              - CULTURE_HERITAGE
            _RETURN_: attr all in enumList
      - _NAME_: SEARCH_FULFILMENT
        action: ['search']
        _RETURN_:
          - _NAME_: FULFILMENT_REQUIRED
            _RETURN_:
              - _NAME_: REQUIRED_FULFILMENT_CATEGORY
                attr: $.message.intent.fulfillment.vehicle.category
                _RETURN_: attr are present
          - _NAME_: FULFILMENT_ENUM
            _RETURN_:
              - _NAME_: VALID_ENUM_CATEGORY
                attr: $.message.intent.fulfillment.vehicle.category
                enumList:
                  - SITE
                _RETURN_: attr all in enumList
          - _NAME_: REQUIRED_STOPS_START
            attr: $.message.intent.fulfillment.stops[*].type
            var_type: ['START']
            _CONTINUE_: '!(var_type equal to attr)'
            _RETURN_:
              - _NAME_: REQUIRED_STOPS_TYPE
                _RETURN_:
                  - _NAME_: REQUIRED_FULFILMENT_STOP_TYPE
                    attr: $.message.intent.fulfillment.stops[*].type
                    _RETURN_: attr are present
                  - _NAME_: REQUIRED_FULFILMENT_LOCATION_CODE
                    attr: $.message.intent.fulfillment.stops.location.city.code
                    _RETURN_: attr are present
                  - _NAME_: REQUIRED_FULFILMENT_START_RANGE
                    attr: $.message.intent.fulfillment.stops.time.range.start
                    _RETURN_: attr are present
                  - _NAME_: REQUIRED_FULFILMENT_END_RANGE
                    attr: $.message.intent.fulfillment.stops.time.range.end
                    _RETURN_: attr are present
              - _NAME_: ENUMS_STOPS
                _RETURN_:
                  - _NAME_: ENUM_STOP_TYPE
                    attr: $.message.intent.fulfillment.stops[*].type
                    enumList:
                      - START
                    _RETURN_: attr all in enumList
                  - _NAME_: REGEX_FULFILMENT_LOCATION_CODE
                    attr: $.message.intent.fulfillment.stops.location.city.code
                    reg: ['(\\*)|(^std\\:[0-9]{2,4}$)']
                    _RETURN_: attr follow regex reg
                  - _NAME_: REGEX_FULFILMENT_START_RANGE
                    attr: $.message.intent.fulfillment.stops.time.range.start
                    reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                    _RETURN_: attr follow regex reg
                  - _NAME_: REGEX_FULFILMENT_END_RANGE
                    attr: $.message.intent.fulfillment.stops.time.range.start
                    reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                    _RETURN_: attr follow regex reg
      - _NAME_: SEARCH_PAYMENT
        action: ['search']
        _RETURN_:
          - _NAME_: REQUIRED_PAYMENT_COLLECTED_BY
            attr: $.message.intent.payment.collected_by
            _RETURN_: attr are present
          - _NAME_: ENUM_PAYMENT_COLLECTED_BY
            attr: $.message.intent.payment.collected_by
            enumList:
              - BPP
              - BAP
            _RETURN_: attr any in enumList
      - _NAME_: SEARCH_INTENT_TAGS
        _RETURN_:
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BAP_TERMS
              - INCREMENTAL_PULL
            tagPath: $.message.intent.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.intent.tags[?(@.descriptor.code=='BAP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_TYPE
              - BUYER_FINDER_FEES_PERCENTAGE
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: PAYMENT_TAG_INCREMENTAL_PULL
            _SCOPE_: $.message.intent.tags[?(@.descriptor.code=='INCREMENTAL_PULL')]
            subTags: $.list[*].descriptor.code
            validValues:
              - REGISTER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    on_search:
      - _NAME_: ON_SEARCH_CONTEXT
        action: ['on_search']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: ON_SEARCH_CATALOG
        action: ['on_search']
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_CATALOG_NAME
            attr: $.message.catalog.descriptor.name
            _RETURN_: attr are present
      - _NAME_: ON_SEARCH_PROVIDERS
        action: ['on_search']
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ID
            attr: $.message.catalog.providers[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_DESCRIPTOR
            attr: $.message.catalog.providers[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY_ID
            attr: $.message.catalog.providers[*].categories[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY
            attr: $.message.catalog.providers[*].categories[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY_CODE
            attr: $.message.catalog.providers[*].categories[*].descriptor.code
            useCasePath: $.message.catalog.providers[*].categories[*].parent_category_id
            _CONTINUE_: (useCasePath are present)
            _RETURN_: attr are present
          - _NAME_: ENUM_MESSAGE_PROVIDERS_CATRGORY_CODE
            attr: $.message.catalog.providers[*].categories[*].descriptor.code
            enumList:
              - CULTURE_HERITAGE
            useCasePath: $.message.catalog.providers[*].categories[*].parent_category_id
            _CONTINUE_: (useCasePath are present)
            _RETURN_: attr all in enumList
          - _NAME_: CHECK_CATEGORY_ID_PARENT_ID
            attr: $.message.catalog.providers[*].categories[*].parent_category_id
            useCasePath: $.message.catalog.providers[*].categories[*].descriptor.code
            var_category_id: $.message.catalog.providers[*].categories[*].id
            _CONTINUE_: '!(useCasePath are present && var_category_id equal to attr)'
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_START_RANGE
            attr: $.message.catalog.providers[*].time.range.start
            reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
            _RETURN_: attr are present && attr follow regex reg
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_END_RANGE
            attr: $.message.catalog.providers[*].time.range.end
            reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
            _RETURN_: attr are present && attr follow regex reg
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_ID
            attr: $.message.catalog.providers[*].locations[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_GPS
            attr: $.message.catalog.providers[*].locations[*].gps
            reg: ['^gps:\\s*-?\\d{1,2}\\.\\d{1,6},\\s*-?\\d{1,3}\\.\\d{1,6}$']
            _RETURN_: attr are present && attr follow regex reg
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_NAME
            attr: $.message.catalog.providers[*].locations[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_DESC
            attr: $.message.catalog.providers[*].locations[*].descriptor.short_desc
            _RETURN_: attr are present
      - _NAME_: ON_SEARCH_ITEMS_PAGE_1
        action: ['on_search']
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page: ['CURRENT_PAGE_NUMBER']
        _CONTINUE_: '!(var_page equal to subTags)'
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_ID
                attr: $.message.catalog.providers[*].items[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_NAME
                attr: $.message.catalog.providers[*].items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_LOCATIONS
                attr: $.message.catalog.providers[*].items[*].location_ids[*]
                _RETURN_: attr are present
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_LOCATIONS_1
                attr: $.message.catalog.providers[*].items[*].location_ids[*]
                usecasepath: $.message.catalog.providers[*].locations[*].id
                _RETURN_: attr all in usecasepath
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_CATEGORIES
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                usecasepath: $.message.catalog.providers[*].categories[*].id
                _RETURN_: attr all in usecasepath
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CATEGORIES_1
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_FULFILMENTS
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                _RETURN_: attr are present
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_CATEGORIES_2
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                usecasepath: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr all in usecasepath
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_IMAGES_URL
                attr: $.message.catalog.providers[*].items[*].descriptor.images[*].url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_REPLACEMENT
                attr: >-
                  $.message.catalog.providers[*].items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
          - _NAME_: ENUM_ITEMS
            _RETURN_:
              - _NAME_: ENUM_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                enumList:
                  - ABSTRACT
                  - ENTRY_PASS
                  - ADD_ON
                _RETURN_: attr all in enumList
          - _NAME_: REGEX_MESSAGE_PROVIDERS_ITEMS_IMAGES_URL
            attr: $.message.catalog.providers[*].items[*].descriptor.images[*].url
            reg: ['^https:\\/\\/[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}(\\/.*)?$']
            _RETURN_: attr follow regex reg
          - _NAME_: ABSTRACT_ITEM_CODE
            usecasepath: $.message.catalog.providers[*].items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code equal to usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_CANCELLATION_TERMS_ELIGIBLE
                attr: $.message.catalog.providers[*].items[*].cancellation_terms[*].cancellation_eligible
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_MIME
                attr: >-
                  $.message.catalog.providers[*].items[*].replacement_terms[*].external_ref.mimetype
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.catalog.providers[*].items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REGEX_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.catalog.providers[*].items[*].replacement_terms[*].external_ref.url
                reg: ['^https?:\\/\\/[a-zA-Z0-9.-]+(?:\\.[a-zA-Z]{2,})?(:\\d+)?(\\/[^\\s?#]*)?(\\?[^\\s#]*)?(#[^\\s]*)?$']
                _RETURN_: attr follow regex reg
          - _NAME_: CHILD_ITEM_CODE
            usecasepath: $.message.catalog.providers[*].items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code none in usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_PARENT_ITEM_ID
                attr: $.message.catalog.providers[*].items[*].parent_item_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_PRICE_VAL
                attr: $.message.catalog.providers[*].items[*].price.value
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_PRICE_CURRENCY
                attr: $.message.catalog.providers[*].items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_QUANTITY_MAX
                attr: $.message.catalog.providers[*].items[*].quantity.maximum.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_QUANTITY_MIN
                attr: $.message.catalog.providers[*].items[*].quantity.minimum.count
                _RETURN_: attr are present
              - _NAME_: ITEM_TAGS
                validTags:
                  - FARE_POLICY
                tagPath: $.message.catalog.tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_ITEM_TAG_FARE_POLICY
                _SCOPE_: >-
                  $.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='FARE_POLICY')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - MIN_AGE
                  - MAX_AGE
                  - GENDER
                  - NATIONALITY
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
      - _NAME_: ON_SEARCH_FULLFILLMENTS
        action: ['on_search']
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page: ['CURRENT_PAGE_NUMBER']
        _CONTINUE_: '!(var_page equal to subTags)'
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_ID
                attr: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_CATEGORY
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.category
                _RETURN_: attr are present
          - _NAME_: ENUM_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                enumList:
                  - VISIT
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].type
                enumList:
                  - START
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_CATEGORY
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.category
                enumList:
                  - VISIT
                _RETURN_: attr all in enumList
      - _NAME_: ON_SEARCH_TAGS
        action: ['on_search']
        _RETURN_:
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BPP_TERMS
              - PAGINATION
            tagPath: $.message.catalog.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BPP_TERMS
            _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='BPP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
              - BUYER_FINDER_FEES_TYPE
              - STATIC_TERMS
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_PAYMENT_TAG_PAGINATION
            _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
            subTags: $.list[*].descriptor.code
            validValues:
              - PAGINATION_ID
              - CURRENT_PAGE_NUMBER
              - MAX_PAGE_NUMBER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    select:
      - _NAME_: SELECT_CONTEXT
        action: ['select']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: SELECT_ITEM_SELECT_0
        action: ['select']
        _RETURN_: &COMMON_ACTION_ITEM
          - _NAME_: REQUIRED_ORDER_ITEM
            attr: $.message.order.items[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_PARENT
            attr: $.message.order.items[*].parent_item_id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_QUANTITY
            attr: $.message.order.items[*].quantity.selected.count
            _RETURN_: attr are present
      - _NAME_: SELECT_ITEM_SELECT_1
        action: ['select']
        _RETURN_:
          - _NAME_: REQUIRED_ORDER_ITEM
            attr: $.message.order.items[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_PARENT
            attr: $.message.order.items[*].parent_item_id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_QUANTITY
            attr: $.message.order.items[*].quantity.selected.count
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_XINPUT_FORM
            attr: $.message.order.items[*].xinput.form.id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_XINPUT_FORM_RESPONSE
            attr: $.message.order.items[*].xinput.form_response.status
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_ITEM_XINPUT_FORM_RESPONSE_SUBMISSION
            attr: $.message.order.items[*].xinput.form_response.submission_id
            _RETURN_: attr are present
      - _NAME_: SELECT_FULLFILLMENTS
        action: ['select']
        _RETURN_: &COMMON_ACTION_FULFILLMENTS
          - _NAME_: REQUIRED_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                _RETURN_: attr are present
          - _NAME_: ENUM_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg
      - _NAME_: SELECT_PROVIDER
        action: ['select']
        _RETURN_: &COMMON_ACTION_PROVIDER
          - _NAME_: REQUIRED_ORDER_PROVIDER
            attr: $.message.order.provider.id
            _RETURN_: attr are present
    on_select:
      - _NAME_: ON_SELECT_CONTEXT
        action: ['on_select']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: ON_SELECT_ITEMS_PAGE_0
        action: ['on_select']
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_ITEMS_ID
                attr: $.message.order.items[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_NAME
                attr: $.message.order.items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_LOCATIONS
                attr: $.message.order.items[*].location_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_CATEGORIES
                attr: $.message.order.items[*].category_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_FULFILMENTS
                attr: $.message.order.items[*].fulfillment_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_IMAGES_URL
                attr: $.message.order.items[*].descriptor.images[*].url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_REPLACEMENT
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_NAME
                attr: $.message.order.items[*].xinput.head.descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_INDEX_MIN
                attr: $.message.order.items[*].xinput.head.index.min
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_INDEX_CUR
                attr: $.message.order.items[*].xinput.head.index.cur
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_INDEX_MAX
                attr: $.message.order.items[*].xinput.head.index.max
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_HEADINGS
                attr: $.message.order.items[*].xinput.head.headings[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_FORM
                attr: $.message.order.items[*].xinput.form.id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_FORM_MIME
                attr: $.message.order.items[*].xinput.form.mime_type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_URL
                attr: $.message.order.items[*].xinput.form.url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_RESUBMIT
                attr: $.message.order.items[*].xinput.form.resubmit
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_MULTIPLE_SUMBISSIONS
                attr: $.message.order.items[*].xinput.form.multiple_sumbissions
                _RETURN_: attr are present
          - _NAME_: ENUM_ITEMS
            _RETURN_:
              - _NAME_: ENUM_MESSAGE_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                enumList:
                  - ABSTRACT
                  - ENTRY_PASS
                  - ADD_ON
                _RETURN_: attr all in enumList
          - _NAME_: REGEX_MESSAGE_ITEMS_IMAGES_URL
            attr: $.message.order.items[*].descriptor.images[*].url
            reg: ['^https:\\/\\/[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}(\\/.*)?$']
            _RETURN_: attr follow regex reg
          - _NAME_: ABSTRACT_ITEM_CODE
            usecasepath: $.message.order.items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code equal to usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_CANCELLATION_TERMS_ELIGIBLE
                attr: >-
                  $.message.order.items[*].cancellation_terms[*].cancellation_eligible
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_MIME
                attr: >-
                  $.message.order.items[*].replacement_terms[*].external_ref.mimetype
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REGEX_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                reg: ['^https?:\\/\\/[a-zA-Z0-9.-]+(?:\\.[a-zA-Z]{2,})?(:\\d+)?(\\/[^\\s?#]*)?(\\?[^\\s#]*)?(#[^\\s]*)?$']
                _RETURN_: attr follow regex reg
          - _NAME_: CHILD_ITEM_CODE
            usecasepath: $.message.order.items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code none in usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_PARENT_ITEM_ID
                attr: $.message.order.items[*].parent_item_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_PRICE_VAL
                attr: $.message.order.items[*].price.value
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_PRICE_CURRENCY
                attr: $.message.order.items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_QUANTITY_MAX
                attr: $.message.order.items[*].quantity.maximum.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_QUANTITY_MIN
                attr: $.message.order.items[*].quantity.minimum.count
                _RETURN_: attr are present
              - _NAME_: ITEM_TAGS
                validTags:
                  - FARE_POLICY
                tagPath: $.message.order.items[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_ITEM_TAG_FARE_POLICY
                _SCOPE_: >-
                  $.message.order.items[*].tags[?(@.descriptor.code=='FARE_POLICY')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - MIN_AGE
                  - MAX_AGE
                  - GENDER
                  - NATIONALITY
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
      - _NAME_: ON_SELECT_ITEMS_PAGE_1
        action: ['on_select']
        _RETURN_: &COMMON_ON_ACTION_ITEMS
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_ITEMS_ID
                attr: $.message.order.items[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_NAME
                attr: $.message.order.items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_LOCATIONS
                attr: $.message.order.items[*].location_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CATEGORIES
                attr: $.message.order.items[*].category_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_FULFILMENTS
                attr: $.message.order.items[*].fulfillment_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_IMAGES_URL
                attr: $.message.order.items[*].descriptor.images[*].url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_REPLACEMENT
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_XINPUT_FORM
                attr: $.message.order.items[*].xinput.form.id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_ITEM_XINPUT_FORM_RESPONSE
                attr: $.message.order.items[*].xinput.form_response.status
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_ITEM_XINPUT_FORM_RESPONSE_SUBMISSION
                attr: $.message.order.items[*].xinput.form_response.submission_id
                _RETURN_: attr are present
          - _NAME_: ENUM_ITEMS
            _RETURN_:
              - _NAME_: ENUM_MESSAGE_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                enumList:
                  - ABSTRACT
                  - ENTRY_PASS
                  - ADD_ON
                _RETURN_: attr all in enumList
          - _NAME_: REGEX_MESSAGE_ITEMS_IMAGES_URL
            attr: $.message.order.items[*].descriptor.images[*].url
            reg: ['^https:\/\/[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(\/.*)?$']
            _RETURN_: attr follow regex reg
          - _NAME_: ABSTRACT_ITEM_CODE
            usecasepath: $.message.order.items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code equal to usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_CANCELLATION_TERMS_ELIGIBLE
                attr: >-
                  $.message.order.items[*].cancellation_terms[*].cancellation_eligible
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_MIME
                attr: >-
                  $.message.order.items[*].replacement_terms[*].external_ref.mimetype
                _RETURN_: attr are present
              - _NAME_: REQUIRED_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REGEX_REPLACEMENT_TERMS_ELIGIBLE_URL
                attr: $.message.order.items[*].replacement_terms[*].external_ref.url
                reg: ['^https?:\\/\\/[a-zA-Z0-9.-]+(?:\\.[a-zA-Z]{2,})?(:\\d+)?(\\/[^\\s?#]*)?(\\?[^\\s#]*)?(#[^\\s]*)?$']
                _RETURN_: attr follow regex reg
          - _NAME_: CHILD_ITEM_CODE
            usecasepath: $.message.order.items[*].descriptor.code
            var_code: ['ABSTRACT']
            _CONTINUE_: '!(var_code none in usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_PARENT_ITEM_ID
                attr: $.message.order.items[*].parent_item_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_PRICE_VAL
                attr: $.message.order.items[*].price.value
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_PRICE_CURRENCY
                attr: $.message.order.items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_QUANTITY_MAX
                attr: $.message.order.items[*].quantity.maximum.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_ITEMS_QUANTITY_MIN
                attr: $.message.order.items[*].quantity.minimum.count
                _RETURN_: attr are present
              - _NAME_: ITEM_TAGS
                validTags:
                  - FARE_POLICY
                tagPath: $.message.order.items[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_ITEM_TAG_FARE_POLICY
                _SCOPE_: >-
                  $.message.order.items[*].tags[?(@.descriptor.code=='FARE_POLICY')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - MIN_AGE
                  - MAX_AGE
                  - GENDER
                  - NATIONALITY
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
      - _NAME_: ON_SELECT_FULFILLMENTS
        action: ['on_select']
        _RETURN_: &COMMON_ON_ACTION_FULFILLMENTS
          - _NAME_: REQUIRED_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_TYPE
                attr: $.message.order.fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_STOPS_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                _RETURN_: attr are present
          - _NAME_: ENUM_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.order.fulfillments[*].type
                enumList:
                  - VISIT
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_STOPS_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_FULFILLMENTS_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                enumList:
                  - VISIT
                _RETURN_: attr all in enumList
      - _NAME_: ON_SELECT_PROVIDER
        action: ['on_select']
        _RETURN_: &COMMON_ON_ACTION_PROVIDER
          - _NAME_: REQUIRED_ORDER_PROVIDER
            attr: $.message.order.provider.id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_PROVIDER_DESCRIPTOR_NAME
            attr: $.message.order.provider.descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ORDER_PROVIDER_DESCRIPTOR_IMAGES
            attr: $.message.order.provider.descriptor.images[*].url
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_ID
            attr: $.message.order.provider.locations[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_GPS
            attr: $.message.order.provider.locations[*].gps
            _RETURN_: attr are present
          - _NAME_: REGEX_MESSAGE_PROVIDERS_LOCATIONS_GPS
            attr: $.message.order.provider.locations[*].gps
            reg: ['^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$']
            _RETURN_: attr follow regex reg
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_NAME
            attr: $.message.order.provider.locations[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_DESC
            attr: $.message.order.provider.locations[*].descriptor.short_desc
            _RETURN_: attr are present
      - _NAME_: ON_SELECT_CANCELLATION_TERMS
        action: ['on_select']
        _RETURN_: &COMMON_ON_ACTION_CANCELLATION_TERMS
          - _NAME_: REQUIRED_CANCELLATION_TERMS_ELIGIBLE
            attr: $.message.order.cancellation_terms[*].cancellation_eligible
            _RETURN_: attr are present 
          - _NAME_: REQUIRED_CANCELLATION_TERMS_EXTERNAL_URL 
            attr: $.message.order.cancellation_terms[*].external_ref.url
            useCasePath: $.message.order.cancellation_terms[*].external_ref.url
            _CONTINUE_: '!(useCasePath are present)'
            _RETURN_: attr are present
          - _NAME_: REQUIRED_CANCELLATION_TERMS_EXTERNAL_MIME 
            attr: $.message.order.cancellation_terms[*].external_ref.mimetype
            useCasePath: $.message.order.cancellation_terms[*].external_ref.mimetype
            _CONTINUE_: '!(useCasePath are present)'
            _RETURN_: attr are present 
      # - _NAME_: ON_SELECT_REPLACEMENT_TERMS # Check this test
      #   action: ['on_select']
      #   _RETURN_: &ref_38
      #     - _NAME_: REQUIRED_REPLACEMENT_TERMS_MIMETYPE
      #       attr: $.message.order.replacement_terms[*].mimetype
      #       _RETURN_: attr are present
      #     - _NAME_: REQUIRED_REPLACEMENT_TERMS_URL
      #       attr: $.message.order.replacement_terms[*].url
      #       _RETURN_: attr are present
      - _NAME_: ON_SELECT_QUOTE
        action: ['on_select']
        _RETURN_: &COMMON_ON_ACTION_QUOTE
          - _NAME_: REQUIRED_QUOTE
            _RETURN_:
              - _NAME_: REQUIRED_QUOTE_TITLE
                attr: $.message.order.quote.breakup[*].title
                _RETURN_: attr are present
              - _NAME_: REQUIRED_QUOTE_ITEM_ID
                attr: $.message.order.quote.breakup[*].item.id
                useCasePath: $.message.order.quote.breakup[*].title
                var_title: ['TAX']
                _CONTINUE_: (var_title equal to useCasePath)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_CURRENCY
                attr: $.message.order.quote.breakup[*].item.price.currency
                useCasePath: $.message.order.quote.breakup[*].title
                var_title: ['TAX']
                _CONTINUE_: (var_title equal to useCasePath)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_VALUE
                attr: $.message.order.quote.breakup[*].item.price.value
                useCasePath: $.message.order.quote.breakup[*].title
                var_title: ['TAX']
                _CONTINUE_: (var_title equal to useCasePath)
                _RETURN_: attr are present
          - _NAME_: ENUM_QUOTE
            _RETURN_:
              - _NAME_: ENUM_QUOTE_TITLE
                attr: $.message.order.quote.breakup[*].title
                enumList:
                  - BASE_FARE
                  - TAX
                  - ADD_ONS
                _RETURN_: attr all in enumList
    init:
      - _NAME_: INIT_CONTEXT
        action: ['init']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: INIT_ITEM
        action: ['init']
        _RETURN_: *COMMON_ACTION_ITEM
      - _NAME_: INIT_FULLFILLMENTS
        action: ['init']
        _RETURN_: *COMMON_ACTION_FULFILLMENTS
      - _NAME_: INIT_PROVIDER
        action: ['init']
        _RETURN_: *COMMON_ACTION_PROVIDER 
      - _NAME_: INIT_PAYMENTS
        action: ['init']
        _RETURN_: &COMMON_ACTION_PAYMENTS
          - _NAME_: REQUIRED_PAYMENTS_ID
            attr: $.message.order.payments[*].id
            useCasePath: $.message.order.payments[*].collected_by
            var_collectedby: ['BPP']
            _CONTINUE_: (var_collectedby equal to useCasePath)
            _RETURN_: attr are present
          - _NAME_: REQUIRED_PAYMENTS_COLLECTOR
            attr: $.message.order.payments[*].collected_by
            enumList:
              - BAP
              - BPP
            _RETURN_: attr are present && attr all in enumList
          - _NAME_: REQUIRED_PAYMENTS_STATUS
            attr: $.message.order.payments[*].status
            enumList:
              - PAID
              - NOT-PAID
            _RETURN_: attr are present && attr all in enumList
          - _NAME_: REQUIRED_PAYMENTS_TYPE
            attr: $.message.order.payments[*].type
            enumList:
              - PRE-ORDER
            _RETURN_: attr are present && attr all in enumList
      - _NAME_: INIT_PAYMENTS_TAG
        action: ['init']
        _RETURN_:
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BAP_TERMS
            tagPath: $.message.order.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.order.tags[?(@.descriptor.code=='BAP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_TYPE
              - BUYER_FINDER_FEES_PERCENTAGE
              - STATIC_TERMS
              - SETTLEMENT_BASIS
              - SETTLEMENT_WINDOW
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    on_init:
      - _NAME_: ONINIT_CONTEXT
        action: ['on_init']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: ON_INIT_ITEMS
        action: ['on_init']
        _RETURN_: *COMMON_ON_ACTION_ITEMS
      - _NAME_: ON_INIT_FULFILLMENTS
        action: ['on_init']
        _RETURN_: *COMMON_ON_ACTION_FULFILLMENTS
      - _NAME_: ON_INIT_PROVIDER
        action: ['on_init']
        _RETURN_: *COMMON_ON_ACTION_PROVIDER
      - _NAME_: ON_INIT_CANCELLATION_TERMS
        action: ['on_init']
        _RETURN_: *COMMON_ON_ACTION_CANCELLATION_TERMS
      # - _NAME_: ON_INIT_REPLACEMENT_TERMS
      #   action: ['on_init']
      #   _RETURN_: *ref_38
      - _NAME_: ON_INIT_QUOTE
        action: ['on_init']
        _RETURN_: *COMMON_ON_ACTION_QUOTE
      - _NAME_: ON_INIT_PAYMENTS
        action: ['on_init']
        _RETURN_: *COMMON_ACTION_PAYMENTS
      - _NAME_: ON_INIT_PAYMENTS_TAG
        action: ['on_init']
        _RETURN_: &COMMON_BPP_TERMS
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BPP_TERMS
            tagPath: $.message.order.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BPP_TERMS
            _SCOPE_: $.message.order.tags[?(@.descriptor.code=='BPP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_TYPE
              - BUYER_FINDER_FEES_PERCENTAGE
              - STATIC_TERMS
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
              - SETTLEMENT_AMOUNT
              - SETTLEMENT_TYPE
              - SETTLEMENT_BANK_CODE
              - SETTLEMENT_BANK_ACCOUNT_NUMBER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    confirm:
      - _NAME_: CONFIRM_CONTEXT
        action: ['confirm']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: CONFIRM_ITEM
        action: ['confirm']
        _RETURN_: *COMMON_ACTION_ITEM
      - _NAME_: INIT_FULLFILLMENTS
        action: ['confirm']
        _RETURN_: *COMMON_ACTION_FULFILLMENTS
      - _NAME_: INIT_PROVIDER
        action: ['confirm']
        _RETURN_: *COMMON_ACTION_PROVIDER
      - _NAME_: CONFIRM_PAYMENTS
        action: ['confirm']
        _RETURN_: &COMMON_ACTION_PAYMENTS
          - _NAME_: REQUIRED_PAYMENTS
            _RETURN_:
              - _NAME_: REQUIRED_PAYMENTS_ID
                attr: $.message.order.payments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_PAYMENTS_COLLECTOR
                attr: $.message.order.payments[*].collected_by
                _RETURN_: attr are present
              - _NAME_: REQUIRED_PAYMENTS_STATUS
                attr: $.message.order.payments[*].status
                enumList:
                  - BAP
                  - BPP
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_PAYMENTS_TYPE
                attr: $.message.order.payments[*].type
                _RETURN_: attr are present
          - _NAME_: ENUM_PAYMENTS
            _RETURN_:
              - _NAME_: REQUIRED_PAYMENTS_COLLECTOR
                attr: $.message.order.payments[*].collected_by
                enumList:
                  - BAP
                  - BPP
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_PAYMENTS_STATUS
                attr: $.message.order.payments[*].status
                enumList:
                  - PAID
                  - NOT-PAID
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_PAYMENTS_TYPE
                attr: $.message.order.payments[*].type
                enumList:
                  - PRE-ORDER
                _RETURN_: attr all in enumList
          - _NAME_: REQUIRED_PAYMENT_PARAMS
            attr: $.message.order.payments[*].params.transaction_id
            useCasePath: $.message.order.payments[*].status
            var_status: ['PAID']
            _CONTINUE_: '!(var_status equal to useCasePath)'
            _RETURN_:
              - _NAME_: REQUIRED_PAYMENTS_TRANSACTION_ID
                attr: $.message.order.payments[*].params.transaction_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_PAYMENTS_CURRENCY
                attr: $.message.order.payments[*].params.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_PAYMENTS_AMOUNT
                attr: $.message.order.payments[*].params.amount
                _RETURN_: attr are present
      - _NAME_: CONFIRM_PAYMENTS_TAG
        action: ['confirm']
        _RETURN_: &COMMON_ACTION_BAP_BPP_PAYMENTS_TAG
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BAP_TERMS
              - BPP_TERMS
            tagPath: $.message.order.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.order.tags[?(@.descriptor.code=='BAP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_TYPE
              - BUYER_FINDER_FEES_PERCENTAGE
              - STATIC_TERMS
              - SETTLEMENT_BASIS
              - SETTLEMENT_WINDOW
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_PAYMENT_TAG_BPP_TERMS
            _SCOPE_: $.message.order.tags[?(@.descriptor.code=='BPP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_TYPE
              - BUYER_FINDER_FEES_PERCENTAGE
              - STATIC_TERMS
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
              - SETTLEMENT_AMOUNT
              - SETTLEMENT_TYPE
              - SETTLEMENT_BANK_CODE
              - SETTLEMENT_BANK_ACCOUNT_NUMBER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    on_confirm:
      - _NAME_: ON_CONFIRM_CONTEXT
        action: ['on_confirm']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: ON_CONFIRM_ORDER
        action: ['on_confirm']
        _RETURN_: &COMMON_ON_ACTION_ORDER
          - _NAME_: REQUIRED_ON_CONFIRM_ORDER_ID
            attr: $.message.order.id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ON_CONFIRM_CREATED_AT
            attr: $.message.order.created_at
            _RETURN_: attr are present
          - _NAME_: REGEX_ON_CONFIRM_CREATED_AT
            attr: $.message.order.created_at
            reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
            _RETURN_: attr follow regex reg
          - _NAME_: REQUIRED_ON_CONFIRM_UPDATED_AT
            attr: $.message.order.updated_at
            _RETURN_: attr are present
          - _NAME_: REGEX_ON_CONFIRM_UPDATED_AT
            attr: $.message.order.updated_at
            reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
            _RETURN_: attr follow regex reg
      - _NAME_: ON_CONFIRM_ITEMS
        action: ['on_confirm']
        _RETURN_: *COMMON_ON_ACTION_ITEMS
      - _NAME_: ON_CONFIRM_FULFILLMENTS
        action: ['on_confirm']
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_STATE
                attr: $.message.order.fulfillments[*].state.descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_AUTH
                attr: $.message.order.fulfillments[*].stops[*].authorization.type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_TOKEN
                attr: $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_VALID_TO
                attr: $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_AUTH_STATUS
                attr: $.message.order.fulfillments[*].stops[*].authorization.status
                _RETURN_: attr are present
          - _NAME_: ENUM_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_FULFILMENT_STATE
                attr: $.message.order.fulfillments[*].state.descriptor.code
                enumList:
                  - CONFIRMED
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_FULFILMENT_AUTH
                attr: $.message.order.fulfillments[*].stops[*].authorization.type
                enumList:
                  - QR
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_FULFILMENT_AUTH_STATUS
                attr: $.message.order.fulfillments[*].stops[*].authorization.status
                enumList:
                  - UNCLAIMED
                _RETURN_: attr all in enumList
      - _NAME_: ON_CONFIRM_PROVIDER
        action: ['on_confirm']
        _RETURN_: *COMMON_ON_ACTION_PROVIDER
      - _NAME_: ON_CONFIRM_CANCELLATION_TERMS
        action: ['on_confirm']
        _RETURN_: *COMMON_ON_ACTION_CANCELLATION_TERMS
      # - _NAME_: ON_CONFIRM_REPLACEMENT_TERMS
      #   action: ['on_confirm']
      #   _RETURN_: *ref_38
      - _NAME_: ON_CONFIRM_QUOTE
        action: ['on_confirm']
        _RETURN_: *COMMON_ON_ACTION_QUOTE
      - _NAME_: ON_CONFIRM_PAYMENTS
        action: ['on_confirm']
        _RETURN_: *COMMON_ACTION_PAYMENTS
      - _NAME_: ON_CONFIRM_PAYMENTS_TAG
        action: ['on_confirm']
        _RETURN_: *COMMON_ACTION_BAP_BPP_PAYMENTS_TAG
    status:
      - _NAME_: STATUS_CONTEXT
        action: ['status']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: REQUIRED_ORDER_ID
        action: ['status']
        attr: $.message.order_id
        _RETURN_: attr are present
    on_status:
      - _NAME_: ON_STATUS_CONTEXT
        action: ['on_status']
        domain: ['ONDC:TRV14']
        version: ['2.0.0']
        _RETURN_: *CONTEXT_COMMON
      - _NAME_: ON_STATUS_ORDER
        action: ['on_status']
        _RETURN_: *COMMON_ON_ACTION_ORDER
      - _NAME_: ON_STATUS_ITEMS
        action: ['on_status']
        _RETURN_: *COMMON_ON_ACTION_ITEMS
      - _NAME_: ON_CONFIRM_FULFILLMENTS
        action: ['on_confirm']
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_STATE
                attr: $.message.order.fulfillments[*].state.descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_AUTH
                attr: $.message.order.fulfillments[*].stops[*].authorization.type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_TOKEN
                attr: $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_VALID_TO
                attr: $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_AUTH_STATUS
                attr: $.message.order.fulfillments[*].stops[*].authorization.status
                _RETURN_: attr are present
          - _NAME_: ENUM_FULFILLMENT
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_STOPS
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_ORDER_FULFILLMENT_TIME
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_FULFILMENT_STATE
                attr: $.message.order.fulfillments[*].state.descriptor.code
                enumList:
                  - COMPLETED
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_FULFILMENT_AUTH
                attr: $.message.order.fulfillments[*].stops[*].authorization.type
                enumList:
                  - QR
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_FULFILMENT_AUTH_STATUS
                attr: $.message.order.fulfillments[*].stops[*].authorization.status
                enumList:
                  - CLAIMED
                _RETURN_: attr all in enumList
      - _NAME_: ON_STATUS_PROVIDER
        action: ['on_status']
        _RETURN_: *COMMON_ON_ACTION_PROVIDER
      - _NAME_: ON_STATUS_CANCELLATION_TERMS
        action: ['on_status']
        _RETURN_: *COMMON_ON_ACTION_CANCELLATION_TERMS
      # - _NAME_: ON_STATUS_REPLACEMENT_TERMS
      #   action: ['on_status']
      #   _RETURN_: *ref_38
      - _NAME_: ON_STATUS_QUOTE
        action: ['on_status']
        _RETURN_: *COMMON_ON_ACTION_QUOTE
      - _NAME_: ON_STATUS_PAYMENTS
        action: ['on_status']
        _RETURN_: *COMMON_ACTION_PAYMENTS
      - _NAME_: ON_STATUS_PAYMENTS_TAG
        action: ['on_status']
        _RETURN_: *COMMON_BPP_TERMS
