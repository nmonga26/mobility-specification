summary: IntraCity - Vehicle Based Confirmation flow (With Update Call)
details: &details
  - &details_0
    description: Detailed process of ticket confirmation.
    mermaid: "sequenceDiagram

      \  participant Buyer Platform (BAP)

      \  participant Seller Platform (BPP)

      \  Seller Platform (BPP)->>Buyer Platform (BAP):on_confirm

      \  Buyer Platform (BAP)-->>Seller Platform (BPP): ACK\ 

      \  Buyer Platform (BAP)->>Seller Platform (BPP): update - with vehicle
      number request

      \  Seller Platform (BPP)-->>Buyer Platform (BAP):ACK

      \  Seller Platform (BPP)->>Buyer Platform (BAP):on_update

      \  Buyer Platform (BAP)-->>Seller Platform (BPP): ACK

      \          "
steps: &steps


  - summary: Consumer confirms the booking and provides details.
    api: confirm
    details: &steps_6_details
      - &steps_6_details_0
        description: Consumer platform confirms the booking and provides all information
          required for confirmation as per the terms of order
        mermaid: |-
          sequenceDiagram
            participant Buyer Platform (BAP)
            participant Seller Platform (BPP)
            rect rgb(191, 223, 255)
            Buyer Platform (BAP)->>Seller Platform (BPP): confirm
            Seller Platform (BPP)-->>Buyer Platform (BAP):ACK
            end
            Seller Platform (BPP)->>Buyer Platform (BAP):on_confirm
            Buyer Platform (BAP)-->>Seller Platform (BPP): ACK
    reference: if any
    example: &steps_6_example
      summary: Confirm ticket booking
      value: &steps_6_example_value
        $ref: ../../examples/intracity-bus/confirm/confirm_ticket_vehicle_based.yaml
  - &steps_0
    summary: Provider confirms the request
    api: on_confirm
    details: &steps_0_details
      - &steps_0_details_0
        description: Provider confirms the  request and provides the details on
          confirmation.
        mermaid: >-
          sequenceDiagram
            participant Buyer Platform (BAP)
            participant Seller Platform (BPP)
            Buyer Platform (BAP)->>Seller Platform (BPP): confirm
            Seller Platform (BPP)-->>Buyer Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Seller Platform (BPP)->>Buyer Platform (BAP):on_confirm
            Buyer Platform (BAP)-->>Seller Platform (BPP): ACK
            end   
    reference: if any
    example: &steps_0_example
      summary: Return confirmed ticket order with payment confirmation
      value: &steps_0_example_value
        $ref: ../../examples/intracity-bus/on_confirm/Return_confirmed_ticket_order_with_payment_confirmation_32.yaml
  - &steps_1
    summary: Buyer app perform update request with vechicle number
    api: update
    details: &steps_1_details
      - &steps_1_details_0
        description: Buyer app perform update request with vechicle number.
        mermaid: >-
          sequenceDiagram
            participant Buyer Platform (BAP)
            participant Seller Platform (BPP)
            rect rgb(191, 223, 255) 
            Buyer Platform (BAP)->>Seller Platform (BPP): update - with vehicle number request
            Seller Platform (BPP)-->>Buyer Platform (BAP):ACK
            end
            Seller Platform (BPP)->>Buyer Platform (BAP):on_update
            Buyer Platform (BAP)-->>Seller Platform (BPP): ACK
    reference: if any
    example: &steps_1_example
      summary: Update vehicle details for intra-city bus service
      value: &steps_1_example_value
        $ref: ../../examples/intracity-bus/update/Update_vehicle_details_for_intra-city_bus_service_18.yaml
  - &steps_2
    summary: Provider update the order.
    api: on_update
    details: &steps_2_details
      - &steps_2_details_0
        description: Provider update the order and provides with latest order update.
        mermaid: >-
          sequenceDiagram
            participant Buyer Platform (BAP)
            participant Seller Platform (BPP)
            Buyer Platform (BAP)->>Seller Platform (BPP): update - with vehicle number request
            Seller Platform (BPP)-->>Buyer Platform (BAP):ACK
            rect rgb(191, 223, 255) 
            Seller Platform (BPP)->>Buyer Platform (BAP):on_update
            Buyer Platform (BAP)-->>Seller Platform (BPP): ACK
            end
    reference: if any
    example: &steps_2_example
      summary: Return confirmed ticket order with payment confirmation
      value: &steps_2_example_value
        $ref: ../../examples/intracity-bus/on_update/Return_confirmed_ticket_order_with_payment_confirmation_38.yaml
